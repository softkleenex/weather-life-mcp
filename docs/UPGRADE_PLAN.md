# Weather Life MCP 업그레이드 계획

> 한국 특화 기능으로 PlayMCP 공모전 1등 도전!

---

## 현재 상태 분석

### 기존 기능 (v1.0)
- 날씨 조회 (기온, 습도, 풍속, 강수)
- 미세먼지 조회 (PM10, PM2.5)
- 옷차림 추천
- 외출 적합도 점수 (0-100)
- 날씨 요약

### 부족한 점
- 한국 특화 기능 없음
- 계절별 맞춤 정보 없음
- 활동별 추천 없음
- 건강 관련 정보 없음

---

## 업그레이드 계획 (v2.0)

### Phase 1: 생활기상지수 추가 (필수)

#### 1.1 자외선지수 (연중)
```
API: 기상청 생활기상지수 조회서비스 3.0
단계: 위험 > 매우높음 > 높음 > 보통 > 낮음

활용:
- "자외선 어때?" → 현재 자외선지수 + 대응법
- 외출 점수에 반영
- 옷차림에 선글라스/모자/양산 추천 추가
```

#### 1.2 체감온도 (여름철: 6-9월)
```
API: 기상청 생활기상지수 조회서비스 3.0
단계: 위험 > 경고 > 주의 > 관심

활용:
- 실제 기온 대신 체감온도 기반 추천
- 열사병 주의 안내
- 야외활동 적합성 판단
```

#### 1.3 꽃가루농도위험지수 (봄/가을)
```
API: 기상청 생활기상지수 조회서비스 3.0
서비스 기간: 4-6월 (소나무/참나무), 8-10월 (잡초류)

활용:
- 알레르기 환자 맞춤 정보
- "꽃가루 어때?" → 현재 농도 + 주의사항
- 마스크 착용 권고
```

### Phase 2: 보건기상지수 추가 (차별화)

#### 2.1 식중독지수 (여름철 필수!)
```
단계: 위험(86↑) > 경고(71-85) > 주의(55-70) > 관심(35-54) > 낮음(35↓)

활용:
- "오늘 도시락 싸도 돼?" → 식중독 위험도 안내
- 피크닉/야외식사 적합성
- 음식 보관 주의사항
```

#### 2.2 감기가능지수 (9-4월)
```
단계: 매우높음 > 높음 > 보통 > 낮음

활용:
- 환절기 건강 관리 정보
- 옷차림에 "따뜻하게" 강조
```

#### 2.3 천식폐질환가능지수 (연중)
```
활용:
- 미세먼지 + 기상조건 종합
- 호흡기 환자 맞춤 정보
```

### Phase 3: 한국 문화 특화 기능 (1등 포인트!)

#### 3.1 빨래지수 (자체 개발)
```python
# 기상청에서 서비스 종료됨 → 직접 계산!
def calculate_laundry_index(temp, humidity, rain_prob, wind_speed):
    """
    빨래 건조 적합도 계산 (0-100)

    고려 요소:
    - 기온: 높을수록 좋음
    - 습도: 낮을수록 좋음
    - 강수확률: 낮을수록 좋음
    - 풍속: 적당히 높으면 좋음 (너무 높으면 빨래 날아감)
    """
    score = 100

    # 기온 (15-25도 최적)
    if temp < 10:
        score -= 30
    elif temp < 15:
        score -= 15

    # 습도 (40% 이하 최적)
    if humidity > 80:
        score -= 40
    elif humidity > 60:
        score -= 20

    # 강수확률
    if rain_prob > 50:
        score -= 50
    elif rain_prob > 30:
        score -= 20

    # 풍속 (2-5m/s 최적)
    if wind_speed < 1:
        score -= 10
    elif wind_speed > 8:
        score -= 15

    return max(0, min(100, score))
```

**예시 응답:**
```
오늘 빨래하기 좋은 날이에요! (85점)
- 기온 18°C, 습도 45%로 건조 최적
- 오후 3시까지 걷어들이세요 (저녁 비 예보)
```

#### 3.2 등산지수 (자체 개발)
```python
def calculate_hiking_index(temp, humidity, rain_prob, wind_speed, pm25, uv_index):
    """
    등산 적합도 계산 (0-100)
    한국인 등산 사랑을 반영!

    최적 조건:
    - 기온: 15-22°C
    - 습도: 40-60%
    - 강수확률: 20% 미만
    - 풍속: 5m/s 미만
    - 미세먼지: 좋음
    - 자외선: 보통 이하
    """
```

**예시 응답:**
```
오늘 등산하기 딱 좋아요! (92점)
- 북한산 기준: 맑음, 15°C
- 미세먼지 좋음, 자외선 보통
- 추천: 가벼운 긴팔 + 바람막이
- 주의: 오후 4시 이후 기온 급락
```

#### 3.3 한강/피크닉지수 (자체 개발)
```python
def calculate_picnic_index(temp, humidity, rain_prob, wind_speed, pm25, uv_index):
    """
    한강/공원 피크닉 적합도 (0-100)

    고려 요소:
    - 기온: 20-26°C 최적
    - 강수확률: 10% 미만
    - 미세먼지: 보통 이상
    - 풍속: 3m/s 이하 (돗자리 날아감 방지)
    """
```

**예시 응답:**
```
한강 가기 완벽한 날씨! (95점)
- 여의도한강공원 기준: 맑음, 23°C
- 치맥 타임 추천: 오후 5-7시
- 준비물: 돗자리, 선크림, 양산
```

#### 3.4 김장지수 (11-12월 한정, 초 한국 특화!)
```python
def calculate_kimjang_index(temp, temp_min, temp_max):
    """
    김장 적합도 계산

    최적 조건:
    - 평균기온: 4°C 이하
    - 최저기온: 0°C 이하
    - 일교차: 크지 않음

    기상청 기준:
    - 평균기온 4°C 이하가 3일 이상 지속될 때
    """
```

**예시 응답:**
```
이번 주말 김장하기 좋아요! (88점)
- 토요일: 최저 -2°C, 최고 7°C
- 배추 절이기 적합 온도
- 주의: 일요일 오후 눈 예보
```

#### 3.5 세차지수 (자체 개발)
```python
def calculate_car_wash_index(rain_prob_today, rain_prob_tomorrow, pm25, yellow_dust):
    """
    세차 적합도 계산

    고려 요소:
    - 오늘/내일 강수확률
    - 미세먼지 (세차 후 다시 더러워짐)
    - 황사 여부
    """
```

**예시 응답:**
```
세차하기 좋은 날! (90점)
- 오늘/내일 비 없음
- 미세먼지 좋음
- 황사 없음
- 추천: 오전 세차 후 드라이브!
```

### Phase 4: 계절별 특화 기능

#### 봄 (3-5월)
- 꽃가루 알레르기 주의보
- 황사 정보
- 벚꽃 개화 정보 (가능하면)

#### 여름 (6-8월)
- 열대야 정보
- 식중독 주의보
- 물놀이 적합도
- 냉방병 주의

#### 가을 (9-11월)
- 단풍 정보 (가능하면)
- 일교차 주의
- 김장 적기 안내

#### 겨울 (12-2월)
- 한파 특보
- 동파 주의
- 빙판길 주의
- 난방 적정 온도

---

## 새로운 Tool 목록 (v2.0)

### 기존 Tool 업그레이드
1. `get_weather` - 자외선/체감온도 추가
2. `should_i_go_out` - 모든 지수 종합 반영
3. `get_outfit_recommendation` - 계절별 상세화

### 신규 Tool
4. `get_life_index` - 생활기상지수 조회
5. `get_health_index` - 보건기상지수 조회
6. `is_good_for_laundry` - 빨래지수
7. `is_good_for_hiking` - 등산지수
8. `is_good_for_picnic` - 피크닉지수
9. `is_good_for_car_wash` - 세차지수
10. `get_kimjang_timing` - 김장 적기 (11-12월)
11. `get_seasonal_tips` - 계절별 건강/생활 팁

---

## 예상 사용자 시나리오

### 시나리오 1: 주말 계획
```
사용자: "이번 주말 뭐하면 좋을까?"

AI: 이번 주말 활동 추천이에요!

토요일 (맑음, 18°C)
- 등산 적합도: 95점 ⭐ 추천!
- 피크닉 적합도: 88점
- 빨래 적합도: 92점

일요일 (흐림, 15°C)
- 등산 적합도: 65점
- 피크닉 적합도: 55점
- 실내 활동 추천

토요일에 등산 가시고, 빨래도 같이 돌리세요!
```

### 시나리오 2: 알레르기 환자
```
사용자: "나 알레르기 있는데, 오늘 외출해도 돼?"

AI: 알레르기 주의가 필요해요!

현재 상태:
- 꽃가루농도: 높음 (참나무)
- 미세먼지: 보통
- 황사: 없음

외출 시 주의사항:
- KF94 마스크 필수
- 외출 후 샤워/세안
- 창문 닫고 공기청정기 가동
- 알레르기 약 미리 복용
```

### 시나리오 3: 김장 시즌
```
사용자: "김장 언제 하면 좋아?"

AI: 이번 주가 김장 적기예요!

김장 적합도 분석:
- 11/23(토): 88점 ⭐ 추천!
  최저 -1°C, 최고 8°C

- 11/24(일): 75점
  오후 눈 예보

추천 일정:
- 금요일 저녁: 배추 절이기
- 토요일 오전: 김장
- 보관 온도: 0-4°C 유지
```

---

## 기술 구현 계획

### API 추가 연동
1. 기상청 생활기상지수 조회서비스 3.0
   - 자외선지수
   - 체감온도
   - 꽃가루농도위험지수
   - 대기정체지수

2. 기상청 보건기상지수 (추가 API 키 필요 여부 확인)
   - 식중독지수
   - 감기가능지수
   - 천식폐질환가능지수

### 자체 개발 지수
- 빨래지수 (직접 계산)
- 등산지수 (직접 계산)
- 피크닉지수 (직접 계산)
- 세차지수 (직접 계산)
- 김장지수 (직접 계산)

### 파일 구조 추가
```
src/
├── server.py (업데이트)
├── weather_api.py (기존)
├── air_quality_api.py (기존)
├── outfit_recommender.py (기존)
├── life_index_api.py (신규) - 생활기상지수 API
├── health_index_api.py (신규) - 보건기상지수 API
├── activity_recommender.py (신규) - 활동별 추천
└── seasonal_tips.py (신규) - 계절별 팁
```

---

## 일정 계획

### Day 1: API 연동
- [ ] 생활기상지수 API 연동
- [ ] 보건기상지수 API 연동
- [ ] 테스트

### Day 2: 자체 지수 개발
- [ ] 빨래지수 구현
- [ ] 등산지수 구현
- [ ] 피크닉지수 구현
- [ ] 세차지수 구현

### Day 3: 한국 특화 기능
- [ ] 김장지수 구현
- [ ] 계절별 팁 구현
- [ ] 기존 Tool 업그레이드

### Day 4: 통합 및 배포
- [ ] 전체 테스트
- [ ] 문서화 업데이트
- [ ] Railway 배포
- [ ] PlayMCP 업데이트

---

## 예상 경쟁력 분석 (v2.0)

| 항목 | v1.0 | v2.0 | 비고 |
|------|------|------|------|
| 편의성 | 75점 | 90점 | 활동별 맞춤 추천 |
| 창의성 | 70점 | 95점 | 한국 특화 차별화 |
| 안정성 | 65점 | 70점 | API 추가로 약간 리스크 |
| **종합** | **70점** | **85점** | |

### 우승 가능성 (v2.0)
| 순위 | 확률 |
|------|------|
| 1등 | **40%** (+25%) |
| 2등 | 35% |
| 3등 | 20% |
| 수상권 밖 | 5% |

---

## 핵심 차별화 포인트

1. **빨래지수** - 기상청 종료 서비스 부활!
2. **김장지수** - 세계 유일 한국 특화
3. **등산지수** - 등산 강국 한국 맞춤
4. **한강 피크닉지수** - MZ세대 타겟
5. **활동 기반 추천** - "뭐하면 좋을까?" 답변

---

*작성일: 2024-12-24*
*버전: v2.0 계획서*
